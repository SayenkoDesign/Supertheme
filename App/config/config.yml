parameters:
  twig.paths:
    - "%template_dir%/views"
    - "%template_dir%/vendor/symfony/twig-bridge/Resources/views/Form"
  twig.options:
    debug:            "%WP_DEBUG%"
    charset:          "utf-8"
    cache:            null #"%tempalte_dir%/var/twig/views"
    auto_reload:      "%WP_DEBUG%"
    strict_variables: true
    autoescape:       true
    optimizations:    -1

services:
  # just the basics
  http:
    class: "Symfony\\Component\\Form\\Extension\\HttpFoundation\\HttpFoundationExtension"
  session:
    class: "Symfony\\Component\\HttpFoundation\\Session\\Session"
  translater:
    class: "Symfony\\Component\\Translation\\Translator"
    arguments: ["en"]
  # fill that data out
  form:
    class: "Symfony\\Component\\Form\\FormFactoryBuilder"
    factory: ["Symfony\\Component\\Form\\Forms", "createFormFactoryBuilder"]
    calls:
      - ["addExtension", ["@http"]]
      - ["addExtension", ["@form.csrf_extension"]]
      - ["addExtension", ["@form.validator_extension"]]
  form.csrf_extension:
  class: "Symfony\\Component\\Security\\Extension\\Csrf\\CsrfExtension"
    arguments: ["@csrf.token_manager"]
  form.validator_extension:
    class: "Symfony\\Component\\Form\\Extension\\Validator\\ValidatorExtension"
    arguments: ["@validator"]
  csrf.token_generator:
    class: "Symfony\\Component\\Security\\Csrf\\TokenGenerator\\UriSafeTokenGenerator"
  csrf.session_starage:
    class: "Symfony\\Component\\Security\\Csrf\\TokenStorage\\SessionTokenStorage"
    arguments: ["@session"]
  csrf.token_manager:
    class: "Symfony\\Component\\Security\\Csrf\\CsrfTokenManager"
    arguments: ["@csrf.token_generator", "@csrf.session_starage"]
  validator:
    class: "Symfony\\Component\\Validator\\Validator"
    factory: ["Symfony\\Component\\Validator\\Validation", "createValidator"]
  # get twiggy with it
  twig.loader:
    class: "Twig_Loader_Filesystem"
    arguments: ["%twig.paths%"]
  twig.debug:
    class: "Twig_Extension_Debug"
  twig.form_translation:
    class: "Symfony\\Bridge\\Twig\\Extension\\TranslationExtension"
    arguments: ["@translater"]
  twig.form_engine:
    class: "Symfony\\Bridge\\Twig\\Form\\TwigRendererEngine"
    arguments: [["form_div_layout.html.twig"]]
    calls:
      - ["setEnvironment", ["@twig.environment"]]
  twig.form_renderer:
    class: "Symfony\\Bridge\\Twig\\Form\\TwigRenderer"
    arguments: ["@twig.form_engine"]
  twig.form_extension:
    class: "Symfony\\Bridge\\Twig\\Extension\\FormExtension"
    arguments: ["@twig.form_renderer"]
  twig.environment:
    class: "Twig_Environment"
    arguments: ["@twig.loader", "%twig.options%"]
    calls:
      - ["addExtension", ["@twig.debug"]]
      - ["addExtension", ["@twig.form_translation"]]
      - ["addExtension", ["@twig.form_extension"]]